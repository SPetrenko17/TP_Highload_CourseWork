# TP_Highload_CourseWork
# Проектирование высоконагруженных систем. Курсовой проект


<h2>1. Тема</h2>
Shazam. Сервис распознавания музыки.

<h2>2. Оценка диапазона нагрузки</h2>
Достаточно очевидно, что музыка, ради которой человек пользуется сервисом распознавания - будет
скачана/добавлена на устройство. 
Сравним информацию из разных источников:
- Согласно оценке консалтинговой компании Midia Research, которая регулярно обновляет свои оценки, 
    на конец марта 2020 года музыкальными сервисами ежедневно пользуются 400 миллионов людей.
- 5% всей скачиваемой/добавляемой на стриминговых сервисах музыки, приходится на предложенную данным сервисом.
- Сервисом пользуется более 150 миллионов людей ежемесячно.
- Активные пользователи Shazam совершают более 20 миллионов запросов на поиск музыки ежедневно.

5% от 400 000 000 - 20 000 000.

Можно сделать вывод, что 20 миллионов запросов на распознавание музыки - нормальная оценка для данного сервиса
    

Источники:         
https://expandedramblings.com/index.php/shazam-statistics/
https://musically.com/2020/02/19/spotify-apple-how-many-users-big-music-streaming-services/


http://coding-geek.com/how-shazam-works/
https://blog.acrcloud.com/how-does-shazam-work

<h2>3. Планируемая нагрузка</h2>



<h2>4. Логическая схема базы данных</h2>
Начнем с необходимой для распознавания музыки информации:
Для упрощения поиска музыкальных композиций их сигнатуры используются 
как ключи в хэш-таблице. Ключам соответствуют значения времени,
когда набор частот, для которых найдена сигнатура, 
появился в произведении, и идентификатор самого произведения
(название песни и имя исполнителя, например).
Вот вариант того, как подобные записи могут выглядеть в базе данных.

| Хеш отрывка  | Время начала отрывка  | Песня|
| :------------ |:---------------:| -----:|
| 30 51 99 121 195    | 53.52 | **Песня A исполнителя A**|
| 33 56 92 151 185     | 12.32        |   Песня B исполнителя B |
| 39 26 89 141 251 | 15.34        |    Песня C исполнителя C |
| 32 67 100 128 270| 78.43       |    Песня D исполнителя D |
| 30 51 99 121 195 | 10.89        |    `Песня E исполнителя E` |
| 34 57 95 111 200 | 54.52        |    **Песня A исполнителя A** |
| 34 41 93 161 202 | 11.89        |    `Песня E исполнителя E` |

Если обработать таким способом некую библиотеку музыкальных записей,
можно будет построить базу данных с полными сигнатурами каждого произведения.

**Картинка с хешами**

Исходя из того, что подобная система нуждается в масштабировании, а главная сущность - музыка, то не имеет смысла использовать
реляционные базы данных. 


**Картинка с Меладзе**
У одного исполнителя может быть большое количество треков, выпущенных совместно с другими исполнителями. 
Почти все стриминговые сервисы предпочитают связь "песня-исполнитель", как "многие к одному"


**Найти количество песен в шазаме**


Посчитать по статье объем памяти на хеши одной песни


В добавок ко всему, поиск всегда будет осуществляться по хешу определенного временного сектора трека. NoSQL решения подойдут лучше 


https://habr.com/ru/company/wunderfund/blog/275043/

<h2>5. Физическая система хранения</h2>

DynamoDB - более 500 000 операций в секунду


<h2>6. Прочие технологии</h2>

<h3>6.1 Языки программирования</h3>
Необходимо использовать много математических вычислений. 
C++/C или Ruby для быстрых вычислений

<h3>6.2 Фреймворки</h3>
todo
<h3>6.3 Протоколы взаимодействия</h3>
todo
<h3>6.4 Веб-сервера </h3>
Посмотреть предложения Amazon

<h2>7. Расчет нагрузки и потребного оборудования</h2>
Посмотреть предложения Amazon

<h2>8. Выбор хостинга / облачного провайдера и расположения серверов</h2>
Amazon

<h2>9. Схема балансировки нагрузки (входящего трафика и внутрипроектного, терминация SSL)</h2>
Почитать про организацию эластичных балансировщиков

<h2>10. Обеспечение отказоустойчивости</h2>
todo
